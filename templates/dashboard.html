<!DOCTYPE html>
<html lang="{{ get_locale() }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoNeura AI - Dashboard</title>
    <style>
        body, html { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f0f2f5; height: 100%; }
        .container { display: flex; height: 100%; }
        .left-panel { flex: 0 0 450px; background-color: #ffffff; padding: 30px; display: flex; flex-direction: column; border-right: 1px solid #ddd; }
        .right-panel { flex-grow: 1; background-color: #f8f9fa; padding: 40px; overflow-y: auto; }
        h1, h2, h3 { color: #1c1e21; margin-top: 0; }
        .chat-header h2 { font-size: 24px; }
        .chat-window { flex-grow: 1; border-radius: 8px; margin-top: 20px; display: flex; flex-direction: column; }
        .chat-messages { flex-grow: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; }
        .chat-messages p { margin: 0; padding: 10px 15px; border-radius: 20px; max-width: 85%; word-wrap: break-word; line-height: 1.5; font-size: 15px;}
        .msg-user { background-color: #007bff; color: white; align-self: flex-end; margin-left: auto; }
        .msg-assistant { background-color: #e9ecef; color: #333; align-self: flex-start; }
        .chat-input { display: flex; border-top: 1px solid #ddd; padding-top: 15px; margin-top: 15px; }
        .chat-input input { flex-grow: 1; border: 1px solid #ccc; border-radius: 20px; padding: 10px 15px; font-size: 16px; outline: none; margin-right: 10px;}
        .chat-input button { border: none; background: #007bff; color: white; padding: 10px 20px; cursor: pointer; font-size: 16px; border-radius: 20px; }
        .tab-nav { display: flex; border-bottom: 1px solid #ddd; margin-bottom: 30px; }
        .tab-nav button { background: none; border: none; padding: 15px 20px; cursor: pointer; font-size: 16px; color: #606770; border-bottom: 3px solid transparent; }
        .tab-nav button.active { color: #007bff; border-bottom-color: #007bff; font-weight: 600; }
        .form-section { margin-bottom: 25px; }
        .form-section label { display: block; margin-bottom: 8px; font-weight: 600; color: #495057; }
        .form-section input { width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; box-sizing: border-box; font-size: 16px; }
        .cta-button { background-color: #28a745; color: white; padding: 15px 25px; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 20px;}
        /* Estilos responsivos */
        @media (max-width: 900px) { .container { flex-direction: column; overflow: auto; } .left-panel { flex-basis: 50vh; min-height: 400px; } }
    </style>
</head>
<body>
    <div class="container">
        <!-- === PANEL IZQUIERDO (ASISTENTE IA V3.1) === -->
        <div class="left-panel">
            <div class="chat-header">
                <h2>Inteligencia Artificial AutoNeura</h2>
            </div>
            <div class="chat-window">
                <div class="chat-messages" id="chat-messages">
                    <p class="msg-assistant">{{ _("¡Hola! Soy AutoNeura, tu socio estratégico de IA. Mi misión es simple: conseguirte clientes...") }}</p>
                    <p class="msg-assistant">{{ _("¿Tienes alguna pregunta?") }}</p>
                </div>
                <div class="chat-input">
                    <input type="text" id="user-input" placeholder="{{ _('Escribe tu petición...') }}">
                    <button id="send-btn">{{ _('Enviar') }}</button>
                </div>
            </div>
        </div>

        <!-- === PANEL DERECHO (PESTAÑAS V3.1) === -->
        <div class="right-panel">
            <div class="tab-nav">
                <button class="tab-button active" data-tab="campaign">{{ _('Crear Campaña') }}</button>
                <button class="tab-button" data-tab="data">{{ _('Datos Personales') }}</button>
                <button class="tab-button" data-tab="billing">{{ _('Saldo y Facturación') }}</button>
            </div>

            <!-- Pestaña de Crear Campaña -->
            <div class="tab-content" id="campaign">
                <h2>{{ _('Configurar Campaña de Prospección') }}</h2>
                <div class="form-section">
                    <label for="campaign-name">{{ _('Nombre de la Campaña') }}</label>
                    <input type="text" id="campaign-name" placeholder="{{ _('Ej: Búsqueda de Restaurantes en Miami') }}">
                </div>
                <div class="form-section">
                    <label>{{ _('Criterios de Prospección') }}</label>
                    <label for="product-service" style="margin-top:10px;">{{ _('¿Qué vendes?') }}</label>
                    <input type="text" id="product-service" placeholder="{{ _('Ej: Software para restaurantes') }}">
                    <label for="target-audience" style="margin-top: 15px;">{{ _('¿A quién va dirigido?') }}</label>
                    <input type="text" id="target-audience" placeholder="{{ _('Ej: Restaurantes italianos, Ferreterías') }}">
                    <label for="location" style="margin-top: 15px;">{{ _('Ubicación') }}</label>
                    <input type="text" id="location" placeholder="{{ _('Ej: España, Madrid / USA, Miami') }}">
                    <label for="prospects-per-day" style="margin-top: 15px;">{{ _('Prospectos por Día (mínimo 15)') }}</label>
                    <input type="number" id="prospects-per-day" value="15" min="15">
                </div>
                <div class="form-section" style="background-color: #f8f9fa;">
                    <h4>{{ _('Resumen de Costos') }}</h4>
                    <p>Prospectos por mes: <strong id="total-prospects">450</strong></p>
                    <p>Costo por prospecto: <strong>$5.00</strong></p>
                    <hr>
                    <p>Costo Mensual Estimado: <strong id="total-cost">$2250.00</strong></p>
                </div>
                <button class="cta-button">{{ _('Lanzar Campaña') }}</button>
            </div>

            <!-- Pestaña de Datos Personales -->
            <div class="tab-content" id="data" style="display:none;">
                <h2>{{ _('Mis Datos y Enlaces') }}</h2>
                <!-- Contenido de datos personales aquí -->
            </div>
            
            <!-- Pestaña de Saldo y Facturación -->
            <div class="tab-content" id="billing" style="display:none;">
                <h2>{{ _('Mi Saldo') }}</h2>
                <!-- Contenido de saldo aquí -->
            </div>
        </div>
    </div>
    
    <script>
        // Lógica para las pestañas
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                tabButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                const tabId = button.getAttribute('data-tab');
                tabContents.forEach(content => {
                    content.style.display = content.id === tabId ? 'block' : 'none';
                });
            });
        });

        // Lógica para el cálculo de costos
        const prospectsPerDayInput = document.getElementById('prospects-per-day');
        const totalProspectsEl = document.getElementById('total-prospects');
        const totalCostEl = document.getElementById('total-cost');
        const costPerProspect = 5; // <-- ¡NUEVO PRECIO!

        function updateCosts() {
            let dailyCount = parseInt(prospectsPerDayInput.value) || 0;
            if (dailyCount < 15) {
                dailyCount = 15;
                prospectsPerDayInput.value = 15;
            }
            const monthlyCount = dailyCount * 30;
            const monthlyCost = monthlyCount * costPerProspect;
            totalProspectsEl.textContent = monthlyCount;
            totalCostEl.textContent = `$${monthlyCost.toFixed(2)}`;
        }
        prospectsPerDayInput.addEventListener('input', updateCosts);
        updateCosts(); // <-- Cálculo inicial
    </script>
</body>
</html>
